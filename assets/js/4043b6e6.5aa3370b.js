"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["644"],{2133:function(e,n,t){t.r(n),t.d(n,{default:()=>h,frontMatter:()=>o,metadata:()=>i,assets:()=>d,toc:()=>p,contentTitle:()=>c});var i=JSON.parse('{"id":"stage/Stage","title":"Stage","description":"The Stage component renders a PIXI.Application onto a canvas element and makes the PIXI.Application available for child components using the React\'s Context API.","source":"@site/versioned_docs/version-7.x/stage/Stage.mdx","sourceDirName":"stage","slug":"/stage/","permalink":"/7.x/stage/","draft":false,"unlisted":false,"editUrl":"https://github.com/pixijs/pixi-react/tree/main/docs/versioned_docs/version-7.x/stage/Stage.mdx","tags":[],"version":"7.x","frontMatter":{},"sidebar":"guides","previous":{"title":"Render","permalink":"/7.x/render/"},"next":{"title":"TypeScript","permalink":"/7.x/typescript"}}'),a=t("4246"),s=t("980"),r=t("482");let o={},c="Stage",d={},p=[{value:"Props",id:"props",level:2},{value:"Usage",id:"usage",level:2},{value:"Example",id:"example",level:2},{value:"Custom Updates",id:"custom-updates",level:2},{value:"Update stage on React component changes",id:"update-stage-on-react-component-changes",level:3},{value:"Update stage manually",id:"update-stage-manually",level:3},{value:"Accessing Application",id:"accessing-application",level:2},{value:"AppConsumer",id:"appconsumer",level:4},{value:"withPixiApp",id:"withpixiapp",level:4},{value:"useApp",id:"useapp",level:4}];function l(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"stage",children:"Stage"})}),"\n",(0,a.jsxs)(n.p,{children:["The Stage component renders a ",(0,a.jsx)(n.code,{children:"PIXI.Application"})," onto a canvas element and makes the ",(0,a.jsx)(n.code,{children:"PIXI.Application"})," available for child components using the React's Context API."]}),"\n",(0,a.jsx)(n.h2,{id:"props",children:"Props"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Prop"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Default value"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"width"})}),(0,a.jsx)(n.td,{children:"the width of the renderers view"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"800"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"height"})}),(0,a.jsx)(n.td,{children:"the height of the renderers view"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"600"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"onMount"})}),(0,a.jsx)(n.td,{children:"callback function for the created app instance"}),(0,a.jsx)(n.td,{})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"onUnMount"})}),(0,a.jsx)(n.td,{children:"callback function when the Stage gets unmounted"}),(0,a.jsx)(n.td,{})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"raf"})}),(0,a.jsx)(n.td,{children:"use the internal PIXI ticker (requestAnimationFrame)"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"true"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"renderOnComponentChange"})}),(0,a.jsxs)(n.td,{children:["render stage on component changes. Only useful in combination with ",(0,a.jsx)(n.code,{children:"raf"})," disabled"]}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"true"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"options"})}),(0,a.jsxs)(n.td,{children:["see ",(0,a.jsx)(n.a,{href:"https://pixijs.download/release/docs/PIXI.Application.html",children:"PIXI.Application options"})]}),(0,a.jsx)(n.td,{})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import { render } from 'react-dom'\nimport { Stage, Container, Sprite } from '@pixi/react'\n\nconst App = () => (\n  <Stage width={500} height={400}>\n    { // Pixi React components here... }\n  </Stage>\n)\n\nrender(<App />, document.getElementById('root'))\n"})}),"\n",(0,a.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,a.jsx)(r.k,{version:"v7",height:350,files:{"App.js":"import { Stage, Sprite } from '@pixi/react';\nimport lodash from 'lodash';\n\nconst count = 10;\nconst width = 300;\nconst height = 300;\nconst stageProps = {\n    height,\n    width,\n    options: {\n        backgroundAlpha: 0,\n        antialias: true,\n    },\n};\n\nexport default function StageExample() {\n    return (\n        <Stage {...stageProps}>\n            {lodash.times(count, (i) => (\n                <Sprite\n                    key={i}\n                    image='https://react.pixijs.io/img/coin.png'\n                    scale={(360 / count) * 0.004}\n                    anchor={0.5}\n                    rotation={i * (360 / count) * (Math.PI / 180)}\n                    x={width / 2 + Math.cos(i * (360 / count) * (Math.PI / 180)) * 100}\n                    y={height / 2 + Math.sin(i * (360 / count) * (Math.PI / 180)) * 100}\n                />\n            ))}\n        </Stage>\n    );\n}\n"},dependencies:{"@pixi/react-animated":"^7","react-spring":"^9","pixi.js":"^7","@pixi/react":"^7",lodash:"^4"}}),"\n",(0,a.jsx)(n.h2,{id:"custom-updates",children:"Custom Updates"}),"\n",(0,a.jsxs)(n.p,{children:["By default the ",(0,a.jsx)(n.code,{children:"<Stage>"})," component creates a ",(0,a.jsx)(n.code,{children:"Pixi.Application"})," and updates the stage in a ",(0,a.jsx)(n.code,{children:"requestAnimationFrame"})," loop.\nIt tries to update and render the stage at the max browser rate (~60fps).\nIt updates and renders the stage, even when there are no visual changes.\nThis might result in faster running cooling fans on your computer due the overhead of GPU and CPU calculations."]}),"\n",(0,a.jsx)(n.h3,{id:"update-stage-on-react-component-changes",children:"Update stage on React component changes"}),"\n",(0,a.jsxs)(n.p,{children:["If you want to know when components have changed, you can listen to the ",(0,a.jsx)(n.code,{children:"__REACT_PIXI_REQUEST_RENDER__"})," event on the root container (app.stage)."]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["Disable ",(0,a.jsx)(n.code,{children:"raf"})," and enable ",(0,a.jsx)(n.code,{children:"renderOnComponentChange"}),":"]}),"\n"]}),"\n",(0,a.jsx)(r.k,{version:"v7",height:350,files:{"App.js":"import { Stage, Sprite } from '@pixi/react';\nimport React from 'react';\n\nconst useIteration = (incr = 0.1) => {\n    const [i, setI] = React.useState(0);\n\n    // at mount start raf\n    React.useEffect(() => {\n        let raf;\n\n        const loop = () => {\n            raf = requestAnimationFrame(loop);\n            setI((i) => i + incr);\n        };\n\n        raf = requestAnimationFrame(loop);\n\n        return () => {\n            cancelAnimationFrame(raf);\n        };\n    }, []);\n\n    return i;\n};\n\nexport default function RAFExample() {\n    // a simple incremental hook\n    // https://gist.github.com/inlet/3e80965127d16c056da247f66839f51d\n    const i = useIteration(0.1);\n    return (\n        <Stage\n            width={300}\n            height={300}\n            raf={false}\n            renderOnComponentChange={true}\n            options={{ antialias: true, backgroundAlpha: 0 }}\n        >\n            <Sprite\n                anchor={[-(2 + Math.sin(i / 5) * 2), 0.5]}\n                position={150}\n                rotation={(Math.PI / 180) * 90 + -i}\n                image='https://react.pixijs.io/img/bunny.png'\n            />\n        </Stage>\n    );\n}\n"}}),"\n",(0,a.jsx)(n.h3,{id:"update-stage-manually",children:"Update stage manually"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["Disable ",(0,a.jsx)(n.code,{children:"raf"})," and ",(0,a.jsx)(n.code,{children:"renderOnComponentChange"}),":"]}),"\n"]}),"\n",(0,a.jsx)(r.k,{version:"v7",height:400,files:{"App.js":"import { useEffect, useState } from 'react';\nimport { Stage, Sprite } from '@pixi/react';\nimport React from 'react';\n\nconst useIteration = (incr = 0.1) => {\n    const [i, setI] = useState(0);\n\n    // at mount start raf\n    useEffect(() => {\n        let raf;\n\n        const loop = () => {\n            raf = requestAnimationFrame(loop);\n            setI((i) => i + incr);\n        };\n\n        raf = requestAnimationFrame(loop);\n\n        return () => {\n            cancelAnimationFrame(raf);\n        };\n    }, []);\n\n    return i;\n};\n\nexport default function RAFExample() {\n    const [app, setApp] = useState();\n    const i = useIteration(0.1);\n\n    return (\n        <div style={{ display: 'flex', flexDirection: 'column' }}>\n            <Stage\n                width={300}\n                height={300}\n                raf={false}\n                renderOnComponentChange={false}\n                onMount={setApp}\n                options={{ backgroundColor: 0xeef1f5, antialias: true }}\n            >\n                <Sprite\n                    anchor={0.5}\n                    position={[150 + Math.cos(i) * 50, 150]}\n                    rotation={i}\n                    image='https://react.pixijs.io/img/bunny.png'\n                />\n            </Stage>\n            <button style={{ margin: '20px auto 0 0' }} onClick={() => app.renderer.render(app.stage)}>\n                Render\n            </button>\n        </div>\n    );\n}\n"}}),"\n",(0,a.jsx)(n.h2,{id:"accessing-application",children:"Accessing Application"}),"\n",(0,a.jsxs)(n.p,{children:["To access the ",(0,a.jsx)(n.code,{children:"Application"})," in your child components you can use one of the following:"]}),"\n",(0,a.jsx)(n.h4,{id:"appconsumer",children:"AppConsumer"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import { AppConsumer } from '@pixi/react';\n\nconst MyComponent = () => <AppConsumer>{(app) => <OtherComponent app={app} />}</AppConsumer>;\n"})}),"\n",(0,a.jsx)(n.h4,{id:"withpixiapp",children:"withPixiApp"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import { withPixiApp } from '@pixi/react';\n\nconst MyComponent = withPixiApp(OtherComponent);\n"})}),"\n",(0,a.jsx)(n.h4,{id:"useapp",children:"useApp"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import { useApp } from '@pixi/react';\n\nconst MyComponent = () => {\n    const app = useApp();\n    // app => PIXI.Application\n};\n"})})]})}function h(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);